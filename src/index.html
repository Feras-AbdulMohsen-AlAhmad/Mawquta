<!doctype html>
<html lang="ar" dir="rtl" data-bs-theme="light">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mawquta</title>

    <!-- Theme init: system (ضعه قبل CSS لتجنب الوميض) -->
    <script>
        (function () {
            const root = document.documentElement;
            const mql = window.matchMedia('(prefers-color-scheme: dark)');
            const apply = (isDark) => root.setAttribute('data-bs-theme', isDark ? 'dark' : 'light');
            apply(mql.matches);
            mql.addEventListener?.('change', (e) => apply(e.matches));
        })();
    </script>

    <!-- Bootstrap (CDN) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

    <!-- Your CSS -->
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <main class="container py-4">
        <header class="d-flex flex-wrap gap-2 align-items-center justify-content-between mb-4">
            <div>
                <h1 class="h4 mb-1">كتاباً موقوتاً</h1>
                <p id="metaLocation" class="text-muted mb-0">—</p>
            </div>

            <div class="d-flex gap-2">
                <button id="btnPickCity" class="btn btn-outline-secondary">
                    مدينتي
                </button>

                <button id="btnLocate" class="btn btn-outline-primary">
                    موقعي
                </button>
                <button id="btnRefresh" class="btn btn-primary">
                    تحديث
                </button>
            </div>
        </header>

        <section class="row g-3">
            <!-- Today timings -->
            <div class="col-12 col-lg-7">
                <div class="card p-3">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h2 class="h6 mb-0">مواقيت اليوم</h2>

                        <div class="d-flex align-items-center gap-2">
                            <button id="btnBackToToday" class="btn btn-sm btn-outline-secondary d-none">
                                رجوع لليوم
                            </button>
                            <span id="metaDate" class="text-muted small">—</span>
                            <p id="metaUpdatedAt" class="text-muted small mb-0">—</p>

                        </div>
                    </div>


                    <div id="todayTimings" class="list-group">
                        <!-- render-prayers.js -->
                    </div>
                </div>
            </div>

            <!-- Next prayer -->
            <div class="col-12 col-lg-5">
                <div class="card p-3">
                    <h2 class="h6 mb-2">الصلاة القادمة</h2>
                    <div id="nextPrayerCard">
                        <!-- render-countdown.js -->
                    </div>
                </div>
            </div>

            <!-- Ramadan countdown -->
            <div class="col-12 col-lg-5">
                <div class="card p-3">
                    <h2 class="h6 mb-2">باقي على رمضان</h2>
                    <div id="ramadanCard">
                        <!-- render-ramadan.js -->
                    </div>
                </div>
            </div>

            <!-- Qibla -->
            <div class="col-12 col-lg-5">
                <div class="card p-3">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h2 class="h6 mb-0">اتجاه القبلة</h2>
                        <span id="qiblaDegrees" class="text-muted small">—</span>
                    </div>

                    <div id="qiblaCard"></div>
                </div>
            </div>


            <!-- Week placeholder (نفعّله لاحقاً) -->
            <div class="col-12">
                <div class="card p-3">
                    <h2 class="h6 mb-2">الأسبوع الحالي</h2>
                    <div id="weekPreview" class="d-flex gap-2 overflow-auto">
                        <div class="text-muted small">سيتم تفعيله في الخطوة القادمة.</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- City Picker Modal -->
    <div class="modal fade" id="cityModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">اختيار المدينة</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="إغلاق"></button>
                </div>

                <div class="modal-body">
                    <div class="mb-2">
                        <label class="form-label" for="inputCity">المدينة</label>
                        <input id="inputCity" type="text" class="form-control" placeholder="مثال: Damascus"
                            autocomplete="off" />

                        <!-- Suggestions (Autocomplete) -->
                        <div id="citySuggestions" class="list-group mt-2"></div>
                        <div id="citySuggestHint" class="text-muted small mt-2">
                            ابدأ بكتابة 3 أحرف لعرض الاقتراحات.
                        </div>
                    </div>

                    <div class="mb-2">
                        <label class="form-label" for="inputCountry">الدولة</label>
                        <input id="inputCountry" type="text" class="form-control" placeholder="مثال: Syria"
                            autocomplete="off" />
                    </div>

                    <div id="cityFormError" class="text-danger small d-none"></div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                        إلغاء
                    </button>
                    <button id="btnSaveCity" type="button" class="btn btn-primary">
                        حفظ
                    </button>
                </div>
            </div>
        </div>
    </div>


    <!-- Bootstrap JS (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Axios JS (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- Your JS -->
    <script type="module" src="js/app.js"></script>

</body>

</html>